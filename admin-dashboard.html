<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard | Global Edge Solutions</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Segoe UI", system-ui, sans-serif;
  background: radial-gradient(circle at top left, #1a1a1a, #000);
  color: #fff;
    /* Disable text selection across the site */
    -webkit-user-select: none; /* Chrome, Safari */
    -moz-user-select: none;    /* Firefox */
    -ms-user-select: none;     /* IE/Edge */
    user-select: none;         /* Standard */
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 20% 20%, rgba(255,106,0,0.18), transparent 40%),
    radial-gradient(circle at 80% 80%, rgba(255,152,0,0.15), transparent 40%);
  z-index: -1;
}

/* HEADER */
.header {
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(14px);
  padding: 14px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
}

.brand img { height: 36px; }
.brand span { font-weight: 600; }

.logout {
  background: linear-gradient(45deg,#ff6a00,#ff9800);
  border: none;
  color: #fff;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
}

/* LAYOUT */
.wrapper {
  max-width: 1200px;
  margin: 40px auto;
  padding: 20px;
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 24px;
}

/* CARD */
.card {
  background: rgba(255,255,255,0.92);
  color: #111;
  border-radius: 18px;
  padding: 24px;
  box-shadow: 0 30px 70px rgba(0,0,0,0.4);
}

/* INTERN LIST */
.intern {
  padding: 14px;
  background: #f6f7fb;
  border-radius: 12px;
  margin-bottom: 10px;
  cursor: pointer;
}

.intern:hover {
  background: #ffe6cc;
}

/* PROFILE */
.profile {
  display: flex;
  gap: 20px;
  align-items: center;
}

.avatar {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: linear-gradient(45deg,#ff6a00,#ff9800);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 20px;
}

.badge {
  background: #fff3e0;
  color: #ff6a00;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  margin-top: 6px;
  display: inline-block;
}

.muted {
  color: #555;
  font-size: 14px;
}

/* ===== ADMIN HERO ===== */
.admin-hero {
  background: linear-gradient(
    135deg,
    rgba(255,255,255,0.96),
    rgba(255,245,235,0.96)
  );
  color: #111;
  border-radius: 22px;
  padding: 32px;
  box-shadow: 0 40px 80px rgba(0,0,0,0.45);
}

.admin-hero h1 {
  margin: 0;
  font-size: 28px;
}

.admin-hero p {
  margin: 6px 0 28px;
  color: #555;
}

/* ACTION GRID */
.admin-actions {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 18px;
}

.admin-action {
  background: #fff;
  border-radius: 16px;
  padding: 18px;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease;
  box-shadow: 0 12px 30px rgba(0,0,0,0.15);
}

.admin-action:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 45px rgba(0,0,0,0.25);
}

.admin-action.primary {
  background: linear-gradient(45deg,#ff6a00,#ff9800);
  color: #fff;
}

.admin-action h4 {
  margin: 0 0 6px;
  font-size: 16px;
}

.admin-action span {
  font-size: 13px;
  opacity: .85;
}

/* STATUS BAR */
.system-status {
  margin-top: 22px;
  background: #f6f7fb;
  border-radius: 12px;
  padding: 12px 16px;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.system-dot {
  width: 10px;
  height: 10px;
  background: #2e7d32;
  border-radius: 50%;
}

/* RESPONSIVE */
@media (max-width: 900px) {
  .admin-actions {
    grid-template-columns: 1fr;
  }
}


@media (max-width: 900px) {
  .wrapper {
    grid-template-columns: 1fr;
  }
}
</style>
</head>

<body>

<script>
/* üîê ADMIN PROTECTION */
if (
  localStorage.getItem("loggedIn") !== "true" ||
  localStorage.getItem("userRole") !== "admin"
) {
  location.href = "login.html";
}
</script>

<header class="header">
  <div class="brand">
    <img src="./logo.png" alt="Global Edge Solutions">
    <span>Global Edge Solutions</span>
  </div>
  <button class="logout" onclick="logout()">Logout</button>
</header>


<div class="container">

  <!-- ADMIN CONTROL PANEL -->
  <div class="admin-hero">

    <h1>Admin Control Panel</h1>
    <p>Global Edge Solutions ¬∑ Intern Lead System</p>

    <div class="admin-actions">

      <div class="admin-action primary" onclick="openLeads()">
        <h4>üìÑ View All Leads</h4>
        <span>Open Formspree submissions</span>
      </div>

      <div class="admin-action">
        <h4>üë• Interns</h4>
        <span>Managed via login system</span>
      </div>

      <div class="admin-action">
        <h4>üìÖ Appointments</h4>
        <span>Tracked inside lead notes</span>
      </div>

      <div class="admin-action">
        <h4>‚¨áÔ∏è Export Data</h4>
        <span>CSV export via Formspree</span>
      </div>

    </div>

    <div class="system-status">
      <div class="system-dot"></div>
      Lead system active ¬∑ Submissions connected to Formspree
    </div>

  </div>

</div>

<div class="wrapper">

  <!-- INTERN LIST -->
  <div class="card">
    <h3>üë• Interns</h3>
    <div id="internList">Loading interns‚Ä¶</div>
  </div>

  <!-- INTERN DETAILS -->
  <div class="card">
    <h3>üìÑ Intern Profile</h3>

    <div class="profile">
      <div class="avatar" id="avatar">--</div>
      <div>
        <h2 id="name">Select an intern</h2>
        <p class="muted">ID: <span id="iid">‚Äî</span></p>
        <span class="badge" id="status">‚Äî</span>
      </div>
    </div>

    <hr style="margin:20px 0">

    <p><b>Date of Birth:</b> <span id="dob">‚Äî</span></p>
    <p><b>Phone:</b> <span id="phone">‚Äî</span></p>
  </div>

</div>

<script>

function openLeads() {
  window.open(
    "https://formspree.io/forms/mzzaonly/submissions",
    "_blank"
  );
}

/* üîó APPS SCRIPT URL */
const API_URL = "https://script.google.com/macros/s/AKfycbzuldU_Yxt8CbGuihLQ10gKY-GFcMZkYjtU-ZDlSn4eejXeuu_EeyD7HsFeXsgnbxeo/exec";

/* LOAD INTERN LIST */
fetch(`${API_URL}?action=getInterns`)
  .then(res => res.json())
  .then(data => {
    const list = document.getElementById("internList");
    list.innerHTML = "";

    if (!data.length) {
      list.innerText = "No interns found.";
      return;
    }

    data.forEach(i => {
      const div = document.createElement("div");
      div.className = "intern";
      div.innerHTML = `<b>${i.name}</b><br>${i.intern_id}`;
      div.onclick = () => loadIntern(i.intern_id);
      list.appendChild(div);
    });
  });

/* LOAD SINGLE INTERN */
function loadIntern(id) {
  fetch(`${API_URL}?action=getIntern&id=${id}`)
    .then(res => res.json())
    .then(d => {
      document.getElementById("name").innerText = d.name;
      document.getElementById("iid").innerText = d.intern_id;
      document.getElementById("phone").innerText = d.phone;
      document.getElementById("dob").innerText = d.dob; // ‚úÖ formatted in Apps Script
      document.getElementById("status").innerText = d.status;

      const initials = d.name
        .split(" ")
        .map(w => w[0])
        .join("")
        .slice(0,2);

      document.getElementById("avatar").innerText = initials;
    });
}

function logout() {
  localStorage.clear();
  location.href = "login.html";
}
</script>

</body>
</html>

